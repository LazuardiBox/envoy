#!/usr/bin/env bash
set -euo pipefail

CONFIG="/etc/envoy/config/envoy.yaml"
SERVICE="envoy"

echo "ğŸ” Validating Envoy config..."
envoy --mode validate -c "$CONFIG"

echo "â™»ï¸ Restarting Envoy service..."
sudo systemctl reset-failed "$SERVICE"
sudo systemctl restart "$SERVICE"

echo "ğŸ“Š Envoy service status:"
systemctl status "$SERVICE" --no-pager
